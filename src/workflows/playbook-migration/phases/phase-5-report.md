# Phase 5: REPORT

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
PHASE 5: MIGRATION REPORT
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Summary of all changes for human review
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

### 5.1 Generate Migration Report

Write to `{{sprint_artifacts}}/playbook-migration-report.md`:

```markdown
# Playbook Migration Report

**Date:** {{timestamp}}
**Mode:** {{dry_run ? "DRY RUN (no files modified)" : "LIVE"}}

---

## Summary

| Metric | Count |
|--------|-------|
| Playbooks found | {{n}} |
| Reformatted (legacy -> v1) | {{n}} |
| Completed (partial -> v1) | {{n}} |
| Already v1 (skipped) | {{n}} |
| Empty (flagged) | {{n}} |
| New playbooks created | {{n}} |

## Artifacts Scanned

| Type | Found | Learnings Extracted |
|------|-------|-------------------|
| Mnemosyne | {{n}} | {{n}} learnings, {{n}} anti-patterns |
| Themis | {{n}} | {{n}} MUST_FIX issues |
| Review | {{n}} | {{n}} issues |

## Backfill Results

| Domain | New Entries | Merged | Skipped (duplicate) |
|--------|-----------|--------|-------------------|
{{FOR EACH domain with changes}}
| {{domain}} | {{new}} | {{merged}} | {{skipped}} |
{{END}}

## Playbook Details

{{FOR EACH playbook}}
### {{title}} (`{{filename}}`)

- **Status:** {{migrated/completed/created/skipped}}
- **Size:** {{before_bytes}} -> {{after_bytes}} bytes ({{change}})
- **Sections filled:** {{count}}/7
- **Stories contributing:** {{count}} ({{story_keys}})
- **Entries:** {{gotchas}} gotchas, {{anti_patterns}} anti-patterns, {{code_patterns}} code patterns
{{END}}

## Action Items

{{IF any empty playbooks}}
- [ ] Review empty playbooks for removal: {{list}}
{{END}}

{{IF any playbooks over 10KB after migration}}
- [ ] Manual compaction needed: {{list}} (automated compaction reduced but didn't reach target)
{{END}}

{{IF any domains with uncaptured learnings but no playbook}}
- [ ] Consider creating playbooks for: {{domains}} ({{count}} uncaptured learnings each)
{{END}}

## Backup Location

Originals saved to: `{{playbook_dir}}/.migration-backup/`

To revert: `cp {{playbook_dir}}/.migration-backup/*.md {{playbook_dir}}/`

---

*Generated by playbook-migration v1.0*
```

### 5.2 Display Summary

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
PLAYBOOK MIGRATION COMPLETE
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Playbooks: {{reformatted}} migrated, {{created}} new, {{skipped}} unchanged
Index: {{playbook_dir}}/_index.json ({{entry_count}} entries)
Backfill: {{new_entries}} learnings extracted from {{artifact_count}} artifacts
Backup: {{playbook_dir}}/.migration-backup/

Full report: {{sprint_artifacts}}/playbook-migration-report.md

{{IF action_items > 0}}
WARNING: {{action_items}} items need human review (see report)
{{END}}

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```
